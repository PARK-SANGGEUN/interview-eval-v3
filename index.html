<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ëª¨ë‘ì˜ 1:1 ëŒ€ì… ë©´ì ‘ í‰ê°€ v3.6</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body {font-family:'Pretendard Variable',sans-serif;background:#fff;color:#1E2A38;margin:0;}
header {background:#1E2A38;color:#fff;text-align:center;padding:2rem 1rem;}
main {max-width:950px;margin:2rem auto;padding:1rem;}
input[type=text]{padding:.5rem;border:1px solid #ccc;border-radius:6px;margin:.3rem;width:45%;}
input:focus{outline:2px solid #FF7A00;}
.card {background:#fff;border:1px solid #E5E7EB;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);margin-bottom:1.2rem;}
.card h2 {background:#F9FAFB;margin:0;padding:1rem;border-bottom:1px solid #E5E7EB;cursor:pointer;font-size:1.1rem;display:flex;justify-content:space-between;align-items:center;}
.card-content {display:none;padding:1.2rem;animation:slide .3s ease;}
@keyframes slide {from{opacity:0;transform:translateY(-5px);}to{opacity:1;transform:translateY(0);}}
table {width:100%;border-collapse:collapse;font-size:.9rem;}
th,td {border:1px solid #E5E7EB;padding:.6rem;text-align:center;word-break:keep-all;cursor:pointer;}
@media(max-width:768px){td,th{display:block;width:100%;}}
.feedback-box {background:#F5FAF8;border:1px solid #D1E7DD;border-radius:6px;padding:.6rem;width:100%;height:80px;margin-top:.6rem;font-size:.95rem;}
.comment-select {width:100%;margin-top:.5rem;padding:.5rem;border:1px solid #ccc;border-radius:6px;}
button {background:#FF7A00;color:#fff;border:none;border-radius:8px;padding:.8rem 1.2rem;font-size:1rem;cursor:pointer;margin:.5rem;}
button:hover{background:#e56f00;}
.note {font-size:.9rem;color:#555;background:#f9f9f9;padding:.8rem;border-radius:6px;margin-bottom:1.5rem;}
.grade-A{background:#DCFCE7!important;} .grade-B{background:#E7F6E9!important;}
.grade-C{background:#FEF9C3!important;} .grade-D{background:#FFEDD5!important;}
.grade-E{background:#FEE2E2!important;} .selected{font-weight:bold;border:2px solid #FF7A00;}
#student-info{background:#F8FAFC;border-radius:10px;padding:1rem;margin-bottom:1.5rem;border:1px solid #E5E7EB;}
#summary{height:100px;}
</style>
</head>
<body>
<header>
  <h1>ëª¨ë‘ì˜ 1:1 ëŒ€ì… ë©´ì ‘ í‰ê°€ v3.6</h1>
  <p>í•™ìƒë³„ ë£¨ë¸Œë¦­ ê¸°ë°˜ í”¼ë“œë°± ì‹œìŠ¤í…œ (ì„ ìƒë‹˜ìš©)</p>
</header>

<main>
  <div id="student-info">
    <label>í•™ìƒ ì´ë¦„:</label> <input type="text" id="studentName" placeholder="ì˜ˆ: ê¹€ì§€ì›">
    <label>ëŒ€í•™:</label> <input type="text" id="university" placeholder="ì˜ˆ: ê²½í¬ëŒ€í•™êµ"><br>
    <label>í•™ê³¼:</label> <input type="text" id="major" placeholder="ì˜ˆ: ë¬¼ë¦¬í•™ê³¼">
    <label>ì°¨ì‹œ:</label> <input type="text" id="session" placeholder="ì˜ˆ: 2ì°¨ ë©´ì ‘">
  </div>

  <div class="note">
    ğŸ’¬ <strong>ì‚¬ìš© ì•ˆë‚´</strong><br>
    ê° í•­ëª©ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ë£¨ë¸Œë¦­ì´ í¼ì³ì§‘ë‹ˆë‹¤.<br>
    ë£¨ë¸Œë¦­ í‘œì˜ A~E ì¹¸ì„ í´ë¦­í•˜ë©´ ìƒ‰ìƒì´ ìë™ ë°˜ì˜ë˜ë©°, í”¼ë“œë°±ì— ì½”ë©˜íŠ¸ê°€ ì¶”ê°€ë©ë‹ˆë‹¤.<br>
    ëª¨ë“  ì…ë ¥ ë‚´ìš©ì€ ìë™ ì €ì¥ë˜ë©°, [ğŸ’¾ PDF ì €ì¥] ë²„íŠ¼ìœ¼ë¡œ íŒŒì¼ì„ ë‚´ë ¤ë°›ì•„ ì§ì ‘ ê³µìœ í•˜ì„¸ìš”.
  </div>

  <!-- í•­ëª© í…œí”Œë¦¿ -->
  <div id="rubrics"></div>

  <div class="card">
    <h2 onclick="toggleCard(this)">â‘¥ ì¢…í•© í”¼ë“œë°± <span>â–¼</span></h2>
    <div class="card-content">
      <textarea id="summary" class="feedback-box" placeholder="ì¢…í•© í”¼ë“œë°± ì…ë ¥ ë˜ëŠ” ìˆ˜ì • ê°€ëŠ¥"></textarea>
    </div>
  </div>

  <div style="text-align:center;">
    <button onclick="savePDF()">ğŸ’¾ PDF ì €ì¥</button>
  </div>
</main>

<script>
const rubricData=[
  {id:1,title:'â‘  í‘œí˜„ ë° ì†Œí†µëŠ¥ë ¥',criteria:'ë§ì˜ ëª…ë£Œì„±, ë…¼ë¦¬ êµ¬ì„±, ë©´ì ‘ íƒœë„',
   comments:{A:'ë…¼ë¦¬ì ìœ¼ë¡œ ìì‹ ì˜ ìƒê°ì„ ëª…í™•íˆ ì „ë‹¬í•¨.',E:'ì†Œí†µ ë° ì´í•´ì— ì–´ë ¤ì›€ì´ ìˆìŒ.'}},
  {id:2,title:'â‘¡ ì „ê³µì í•©ì„±',criteria:'ì „ê³µ ê´€ë ¨ ê²½í—˜, ì§„ë¡œ ë™ê¸°',
   comments:{A:'ì „ê³µì— ëŒ€í•œ ì´í•´ê°€ ê¹Šê³  ë™ê¸°ê°€ ëª…í™•í•¨.',E:'ì „ê³µê³¼ì˜ ê´€ë ¨ì„±ì´ ë‚®ê³  ë‹µë³€ì´ ëª¨í˜¸í•¨.'}},
  {id:3,title:'â‘¢ íƒêµ¬ë ¥',criteria:'ë…¼ë¦¬ì  ì‚¬ê³ , ë¬¸ì œí•´ê²°, ì§€ì  í˜¸ê¸°ì‹¬',
   comments:{A:'ë¬¸ì œë¥¼ ê¹Šì´ ë¶„ì„í•˜ê³  ì°½ì˜ì  ëŒ€ì•ˆì„ ì œì‹œí•¨.',E:'ì‚¬ê³ ë ¥ê³¼ ë…¼ë¦¬ êµ¬ì¡°ì˜ ê°œì„ ì´ í•„ìš”í•¨.'}},
  {id:4,title:'â‘£ ì¸ì„±',criteria:'í˜‘ì—…, ë°°ë ¤, ì±…ì„ê°',
   comments:{A:'ì„±ì‹¤í•˜ê³  íƒ€ì¸ì„ ë°°ë ¤í•˜ëŠ” íƒœë„ê°€ ë‹ë³´ì„.',E:'ì†Œê·¹ì ì´ë©° ì±…ì„ê° í‘œí˜„ì´ ë¯¸í¡í•¨.'}},
  {id:5,title:'â‘¤ ì„±ì¥ ê°€ëŠ¥ì„±',criteria:'ìê¸°ì„±ì°°, ë°œì „ì˜ì§€, ê³„íš',
   comments:{A:'ìê¸° ì„±ì°°ê³¼ ë°œì „ ì˜ì§€ê°€ ëšœë ·í•¨.',E:'ì„±ì°° ë¶€ì¡± ë° ê³„íš êµ¬ì²´í™” í•„ìš”.'}},
];
window.onload=()=>{
  const container=document.getElementById('rubrics');
  rubricData.forEach(r=>{
    container.innerHTML+=`
    <div class="card">
      <h2 onclick="toggleCard(this)">${r.title} <span>â–¼</span></h2>
      <div class="card-content">
        <table id="rubric${r.id}">
          <tr><th>ì„¸ë¶€ ê¸°ì¤€</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th></tr>
          <tr>
            <td>${r.criteria}</td>
            <td onclick="selectGrade(this,${r.id},'A')">A</td>
            <td onclick="selectGrade(this,${r.id},'B')">B</td>
            <td onclick="selectGrade(this,${r.id},'C')">C</td>
            <td onclick="selectGrade(this,${r.id},'D')">D</td>
            <td onclick="selectGrade(this,${r.id},'E')">E</td>
          </tr>
        </table>
        <textarea id="feedback${r.id}" class="feedback-box" placeholder="í”¼ë“œë°± ì…ë ¥ ë˜ëŠ” ìˆ˜ì • ê°€ëŠ¥"></textarea>
      </div>
    </div>`;
  });
  loadData();
};

function toggleCard(el){
  document.querySelectorAll('.card-content').forEach(c=>c.style.display='none');
  el.nextElementSibling.style.display='block';
}

function selectGrade(cell,idx,grade){
  const row=cell.parentNode;
  row.querySelectorAll('td').forEach(td=>td.classList.remove('selected','grade-A','grade-B','grade-C','grade-D','grade-E'));
  cell.classList.add('selected','grade-'+grade);
  const fb=document.getElementById('feedback'+idx);
  const c=rubricData.find(x=>x.id===idx).comments;
  fb.value=c[grade]||'';
  saveData();
}

function saveData(){
  const data={
    student:document.getElementById('studentName').value,
    univ:document.getElementById('university').value,
    major:document.getElementById('major').value,
    session:document.getElementById('session').value,
    feedbacks:rubricData.map(r=>document.getElementById('feedback'+r.id).value),
    summary:document.getElementById('summary').value
  };
  localStorage.setItem('interviewEval',JSON.stringify(data));
}

function loadData(){
  const data=JSON.parse(localStorage.getItem('interviewEval')||'{}');
  if(!data)return;
  document.getElementById('studentName').value=data.student||'';
  document.getElementById('university').value=data.univ||'';
  document.getElementById('major').value=data.major||'';
  document.getElementById('session').value=data.session||'';
  (data.feedbacks||[]).forEach((fb,i)=>{
    const id=i+1;
    if(fb)document.getElementById('feedback'+id).value=fb;
  });
  document.getElementById('summary').value=data.summary||'';
}

['studentName','university','major','session','summary'].forEach(id=>{
  document.getElementById(id).addEventListener('input',saveData);
});
document.addEventListener('input',e=>{
  if(e.target.classList.contains('feedback-box'))saveData();
});

function savePDF(){
  const { jsPDF }=window.jspdf;
  const doc=new jsPDF({orientation:'p',unit:'mm',format:'a4'});
  let y=20;
  doc.setFontSize(14);
  const name=document.getElementById('studentName').value||'í•™ìƒ';
  const univ=document.getElementById('university').value||'ëŒ€í•™';
  const major=document.getElementById('major').value||'í•™ê³¼';
  const session=document.getElementById('session').value||'ì°¨ì‹œ';
  doc.text(`ëª¨ë‘ì˜ 1:1 ëŒ€ì… ë©´ì ‘ í‰ê°€ (${session})`,20,y);
  y+=10;
  doc.setFontSize(11);
  doc.text(`í•™ìƒ: ${name}   ëŒ€í•™: ${univ}   í•™ê³¼: ${major}`,20,y);
  y+=10;
  rubricData.forEach(r=>{
    let fb=document.getElementById('feedback'+r.id).value;
    if(fb){
      const lines=doc.splitTextToSize(`${r.title}: ${fb}`,170);
      doc.text(lines,20,y);
      y+=lines.length*6+5;
    }
  });
  let summary=document.getElementById('summary').value;
  if(summary){
    const lines=doc.splitTextToSize(`ì¢…í•© í”¼ë“œë°±: ${summary}`,170);
    doc.text(lines,20,y);
  }
  const filename=`${name}-${univ}-${major}-ë©´ì ‘í”¼ë“œë°±-${session}.pdf`;
  doc.save(filename);
}
</script>
</body>
</html>
