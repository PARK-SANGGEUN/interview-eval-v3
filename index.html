<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>모두의 1:1 대입 면접 평가 v4.4 (All Teachers Edition)</title>

<!-- 폰트 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css" />

<!-- html2canvas & jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root {
  --main: #f97316;
  --navy: #0f172a;
  --border: #d4d4d8;
  --bg: #f9fafb;
  --card: #fff;
  --A: #16a34a; --B: #06b6d4; --C: #facc15; --D: #fb923c; --E: #ef4444;
}
*{box-sizing:border-box}
body {
  font-family: "Pretendard Variable", sans-serif;
  background: var(--bg);
  margin: 0;
  color: #1e293b;
}
header {
  background: var(--navy);
  color: white;
  text-align: center;
  padding: 2rem 1rem 1.2rem;
  border-bottom: 4px solid var(--main);
}
header h1 { margin: 0; font-size: 1.8rem; }
header p { margin: .5rem 0 0; color: #cbd5e1; }
header .sub { color:#cbd5e1;font-size:.9rem;margin-top:6px; }

main { max-width: 980px; margin: 2rem auto; padding: 0 1rem; }

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 1.2rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
.card h2 {
  background: #f1f5f9;
  border-bottom: 1px solid var(--border);
  padding: .9rem 1.2rem;
  font-size: 1.05rem;
  margin: 0;
}
.card .content { padding: 1rem 1.5rem; }

.info-grid {
  display: grid;
  grid-template-columns: 120px 1fr 120px 1fr;
  gap: 12px;
}
label {
  font-weight: 600;
  align-self: center;
}
.input {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  font-size: .95rem;
}
.input:focus { outline: 2px solid var(--main); }

.note {
  background: #fff8f1;
  border-left: 6px solid var(--main);
  padding: 1.2rem 1rem;
  border-radius: 8px;
  margin: 1.5rem 0;
  color: #475569;
  font-size: .95rem;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: .9rem;
  margin-top: .6rem;
}
th, td {
  border: 1px solid var(--border);
  padding: .8rem;
  text-align: center;
}
th {
  background: #f9fafb;
  font-weight: 600;
}
td.grade {
  cursor: pointer;
}
td.grade:hover {
  background: #fef3c7;
}
.selected-A { background: #dcfce7; border:2px solid var(--A); }
.selected-B { background: #cffafe; border:2px solid var(--B); }
.selected-C { background: #fef9c3; border:2px solid var(--C); }
.selected-D { background: #ffedd5; border:2px solid var(--D); }
.selected-E { background: #fee2e2; border:2px solid var(--E); }

.textarea {
  width: 100%;
  height: 120px;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  padding: 10px;
  margin-top: 8px;
}
select {
  width: 100%;
  padding: 8px;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  margin-top: 8px;
}

button {
  background: var(--main);
  color: white;
  border: none;
  border-radius: 10px;
  padding: 12px 18px;
  font-size: 1rem;
  cursor: pointer;
}
button:hover {
  background: #ea580c;
}
footer {
  text-align: center;
  color: #64748b;
  margin: 2rem 0;
  font-size: .9rem;
}
</style>
</head>
<body>
<header>
  <h1>모두의 1:1 대입 면접 평가 v4.4</h1>
  <p>All Teachers — 학생별 루브릭 기반 피드백 시스템</p>
  <p class="sub">Copyright@All Teachers (피드백 p3412@nate.com)</p>
</header>

<main id="capture">
  <div class="note">
    <b>📘 사용 안내</b><br>
    이 평가는 <b>정성 중심의 1:1 면접 평가</b>를 위해 설계되었습니다.<br>
    각 항목의 등급(A~E)을 클릭하면 해당 기준과 루브릭 설명이 표시되며, 코멘트를 선택하거나 직접 작성할 수 있습니다.<br>
    모든 내용은 자동 저장되며, <b>PDF 저장</b> 버튼을 누르면 화면을 캡처하여 출력용 파일로 저장됩니다.<br>
    (모바일에서도 사용 가능하며, 교사별 피드백 관리에 적합합니다.)
  </div>

  <section class="card">
    <h2>기본 정보</h2>
    <div class="content info-grid">
      <label>학생 이름</label><input id="name" class="input" placeholder="예: 김민서">
      <label>대학</label><input id="univ" class="input" placeholder="예: 경희대학교">
      <label>학과</label><input id="major" class="input" placeholder="예: 물리학과">
      <label>차시</label><input id="session" class="input" placeholder="예: 2차 면접">
    </div>
  </section>

  <div id="rubrics"></div>

  <section class="card">
    <h2>⑥ 종합 피드백</h2>
    <div class="content">
      <select id="summarySelect">
        <option>코멘트 선택</option>
        <option>면접 전반에 걸쳐 진정성 있고 논리적인 태도를 보였습니다.</option>
        <option>질문에 대한 이해도가 높고, 생각의 흐름을 명확히 전달했습니다.</option>
        <option>자기성찰과 발전의지가 돋보이며, 구체적인 목표가 제시되었습니다.</option>
        <option>표현력과 사고력이 고르게 우수하였습니다.</option>
        <option>학업 역량과 진로 계획이 잘 연결되어 있습니다.</option>
        <option>긴장감 속에서도 침착하게 응답하였습니다.</option>
        <option>탐구 중심의 태도가 전반적으로 긍정적입니다.</option>
        <option>대학 전공에 대한 이해와 열정이 충분히 전달되었습니다.</option>
        <option>전반적으로 발전 가능성이 높습니다.</option>
      </select>
      <textarea id="summary" class="textarea" placeholder="종합 피드백 입력 또는 수정 가능"></textarea>
    </div>
  </section>

  <div style="text-align:center;margin-top:20px;">
    <button id="pdfBtn">💾 PDF 저장</button>
  </div>
</main>

<footer>
  Copyright@All Teachers (피드백 p3412@nate.com)
</footer>

<script>
const rubricData = [
  {
    title:"① 표현 및 소통능력",
    criteria:"질문 이해도, 논리 구성, 면접 태도",
    levels:{
      A:"질문 의도를 정확히 파악하고 논리적으로 표현함",
      B:"대체로 명확하나 일부 논리적 비약 존재",
      C:"기본 수준의 소통 가능",
      D:"표현이 다소 불분명함",
      E:"소통 및 이해 어려움"
    },
    comments:[
      "자신감 있고 명료한 어조로 논리적 답변을 제시함.",
      "질문 요지를 정확히 파악하며 핵심을 잘 짚음.",
      "표현이 자연스럽고 전달력이 뛰어남.",
      "말의 속도와 어투가 안정적이고 신뢰감을 줌.",
      "예의 바르고 면접 태도가 성숙함.",
      "일부 표현이 반복되지만 내용은 정확함.",
      "의견 전달은 명확하나 근거 제시가 부족함.",
      "내용은 충실하나 표현이 단조로움.",
      "답변 중 약간의 긴장감이 있었으나 회복이 빠름.",
      "소통 의지는 뚜렷하나 논리 연결이 다소 부족함."
    ]
  },
  {
    title:"② 전공적합성",
    criteria:"전공 이해도, 관련 경험 및 진로 동기",
    levels:{
      A:"전공 이해도와 경험이 우수",
      B:"전공 관심은 뚜렷하나 구체성 부족",
      C:"관심은 있으나 경험 제한적",
      D:"전공 동기 불명확",
      E:"전공과 무관한 답변"
    },
    comments:[
      "전공 관련 탐구 경험이 풍부하고 동기가 명확함.",
      "진로 목표와 학문적 흥미가 자연스럽게 연결됨.",
      "전공 교과 학습 경험이 깊고 실제 사례를 언급함.",
      "관련 분야의 탐구 활동을 구체적으로 제시함.",
      "진로 계획이 실현 가능하고 일관성이 있음.",
      "관심은 높으나 구체적인 사례 부족.",
      "탐구 활동의 깊이가 다소 부족함.",
      "연결성은 있으나 표현이 모호함.",
      "지식의 폭은 있으나 전공 관련 경험이 부족함.",
      "진로 방향은 있으나 근거가 불충분함."
    ]
  }
];

// 루브릭 생성
window.onload = () => {
  const container = document.getElementById("rubrics");
  rubricData.forEach((r,i)=>{
    let rows = Object.entries(r.levels).map(([k,v]) =>
      `<tr><td>${k}</td><td class="desc">${v}</td></tr>`).join("");
    const comments = r.comments.map(c=>`<option>${c}</option>`).join("");
    container.innerHTML += `
    <section class="card">
      <h2>${r.title}</h2>
      <div class="content">
        <b>세부 기준:</b> ${r.criteria}
        <table>${rows}</table>
        <select onchange="addComment(this,${i})"><option>코멘트 선택</option>${comments}</select>
        <textarea id="fb${i}" class="textarea" placeholder="피드백 입력 또는 수정 가능"></textarea>
      </div>
    </section>`;
  });
}

// 코멘트 추가
function addComment(sel,idx){
  if(sel.value){
    const t=document.getElementById('fb'+idx);
    t.value+=(t.value?'\n':'')+sel.value;
    sel.value="";
  }
}

// PDF 캡처 저장
document.getElementById("pdfBtn").addEventListener("click",async()=>{
  const { jsPDF } = window.jspdf;
  const area=document.getElementById("capture");
  const canvas=await html2canvas(area,{scale:2});
  const imgData=canvas.toDataURL("image/png");
  const pdf=new jsPDF("p","mm","a4");
  const width=210;
  const height=canvas.height*210/canvas.width;
  let y=0;
  pdf.addImage(imgData,"PNG",0,0,width,height);
  pdf.save(`${document.getElementById("name").value||"학생"}_면접평가.pdf`);
});
</script>
</body>
</html>
