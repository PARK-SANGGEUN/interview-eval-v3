<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ëª¨ë‘ì˜ 1:1 ëŒ€ì… ë©´ì ‘ í‰ê°€ v4.2 (All Teachers Edition)</title>

<!-- Pretendard Font -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css" />

<style>
:root {
  --main-color: #f97316;
  --bg-color: #f8fafc;
  --header-bg: #1e293b;
  --border-color: #e2e8f0;
}
body {
  font-family: "Pretendard Variable", sans-serif;
  margin: 0;
  background: var(--bg-color);
  color: #1e293b;
}

/* HEADER */
header {
  background: var(--header-bg);
  color: white;
  text-align: center;
  padding: 2rem 1rem 1.5rem;
  border-bottom: 4px solid var(--main-color);
}
header h1 {
  margin: 0;
  font-size: 1.9rem;
}
header p {
  margin: 0.5rem 0 0;
  font-size: 1rem;
  color: #cbd5e1;
}

/* MAIN */
main {
  max-width: 960px;
  margin: 2rem auto;
  padding: 0 1rem;
}

/* ì¹´ë“œí˜• */
.card {
  background: white;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  margin-bottom: 1.5rem;
}
.card h2 {
  font-size: 1.1rem;
  background: #f1f5f9;
  padding: 1rem;
  margin: 0;
  border-bottom: 1px solid var(--border-color);
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.card-content {
  padding: 1rem 1.5rem;
}

/* INPUT */
label {
  display: inline-block;
  font-weight: 600;
  width: 90px;
}
input[type="text"] {
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  padding: 0.6rem;
  width: calc(40% - 10px);
  margin: 0.4rem 0.8rem 0.4rem 0;
  font-size: 0.95rem;
}
input[type="text"]:focus {
  outline: 2px solid var(--main-color);
}
@media (max-width: 768px) {
  input[type="text"] {
    width: 100%;
  }
  label {
    width: 100%;
  }
}

/* ì•ˆë‚´ë¬¸ */
.note {
  background: #fff8f1;
  border-left: 5px solid var(--main-color);
  border-radius: 8px;
  padding: 1.2rem;
  font-size: 0.95rem;
  margin: 1.5rem 0;
  color: #475569;
}

/* í…Œì´ë¸” */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
  margin-top: 0.8rem;
}
th, td {
  border: 1px solid var(--border-color);
  padding: 0.7rem;
  text-align: center;
}
td.selected {
  background: #fed7aa;
  font-weight: bold;
}

/* í”¼ë“œë°± ì…ë ¥ */
textarea {
  width: 100%;
  height: 100px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  padding: 0.6rem;
  font-size: 0.95rem;
  margin-top: 0.6rem;
}

/* ë²„íŠ¼ */
button {
  background: var(--main-color);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 0.9rem 1.3rem;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 1rem;
}
button:hover {
  background: #ea580c;
}

/* FOOTER */
footer {
  text-align: center;
  color: #64748b;
  font-size: 0.9rem;
  margin: 2rem 0;
}
</style>
</head>
<body>
<header>
  <h1>ëª¨ë‘ì˜ 1:1 ëŒ€ì… ë©´ì ‘ í‰ê°€ v4.2</h1>
  <p>All Teachers â€” í•™ìƒë³„ ë£¨ë¸Œë¦­ ê¸°ë°˜ í”¼ë“œë°± ì‹œìŠ¤í…œ</p>
</header>

<main>
  <!-- ê¸°ë³¸ì •ë³´ -->
  <div class="card">
    <h2>ê¸°ë³¸ ì •ë³´</h2>
    <div class="card-content">
      <label>í•™ìƒ ì´ë¦„</label><input type="text" id="studentName" placeholder="ì˜ˆ: ê¹€ë¯¼ì„œ" />
      <label>ëŒ€í•™</label><input type="text" id="university" placeholder="ì˜ˆ: ê²½í¬ëŒ€í•™êµ" /><br />
      <label>í•™ê³¼</label><input type="text" id="major" placeholder="ì˜ˆ: ë¬¼ë¦¬í•™ê³¼" />
      <label>ì°¨ì‹œ</label><input type="text" id="session" placeholder="ì˜ˆ: 2ì°¨ ë©´ì ‘" />
    </div>
  </div>

  <!-- ì•ˆë‚´ -->
  <div class="note">
    âš™ï¸ <b>ì‚¬ìš© ì•ˆë‚´</b><br />
    ê° í•­ëª©ì˜ ë“±ê¸‰(A~E)ì„ í´ë¦­í•˜ë©´ ìƒ‰ìƒì´ ë°˜ì˜ë˜ê³  ë£¨ë¸Œë¦­ ì„¤ëª…ì´ í‘œì‹œë©ë‹ˆë‹¤.<br />
    ì½”ë©˜íŠ¸ë¥¼ ì„ íƒí•˜ë©´ í”¼ë“œë°± ì¹¸ì— ìë™ ì…ë ¥ë˜ë©° ì—¬ëŸ¬ ê°œ ì„ íƒ ë° ìˆ˜ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br />
    ëª¨ë“  ì…ë ¥ ë‚´ìš©ì€ ìë™ ì €ì¥ë˜ë©°, <b>[ğŸ’¾ PDF ì €ì¥]</b> ë²„íŠ¼ìœ¼ë¡œ ì§ì ‘ ì €ì¥í•´ ê³µìœ í•˜ì„¸ìš”.
  </div>

  <div id="rubrics"></div>

  <!-- ì¢…í•© í”¼ë“œë°± -->
  <div class="card">
    <h2>â‘¥ ì¢…í•© í”¼ë“œë°±</h2>
    <div class="card-content">
      <textarea id="summary" placeholder="ì¢…í•© í”¼ë“œë°± ì…ë ¥ ë˜ëŠ” ìˆ˜ì • ê°€ëŠ¥"></textarea>
    </div>
  </div>

  <div style="text-align: center">
    <button id="saveBtn">ğŸ’¾ PDF ì €ì¥</button>
  </div>
</main>

<footer>
  Copyright@All Teachers (í”¼ë“œë°± p3412@nate.com)
</footer>

<!-- JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const rubricData = [
  {
    id: 1, title: "â‘  í‘œí˜„ ë° ì†Œí†µëŠ¥ë ¥", criteria: "ë§ì˜ ëª…ë£Œì„±, ë…¼ë¦¬ êµ¬ì„±, ë©´ì ‘ íƒœë„",
    levels: {A:"ì˜ë„ íŒŒì•… ë° ë…¼ë¦¬ì  í‘œí˜„ ìš°ìˆ˜",B:"í‘œí˜„ ëª…í™•í•˜ë‚˜ ì•½ê°„ ë¹„ì•½ ì¡´ì¬",C:"ê¸°ë³¸ ì†Œí†µ ê°€ëŠ¥",D:"í‘œí˜„ ë¶ˆë¶„ëª…",E:"ì´í•´ ì–´ë ¤ì›€"},
    comments: ["ìì‹ ê° ìˆê³  ìì—°ìŠ¤ëŸ¬ìš´ ë§íˆ¬.","ë…¼ë¦¬ì  ì „ê°œê°€ ëª…í™•í•¨.","í‘œí˜„ì´ êµ¬ì²´ì ì´ë©° í•µì‹¬ì„ ì˜ ì „ë‹¬í•¨.","ëª©ì†Œë¦¬ ì•ˆì •ì .","ì˜ˆì˜ ë°”ë¥¸ íƒœë„ ìœ ì§€.","í‘œí˜„ì€ ëª…í™•í•˜ë‚˜ ì™„ì„±ë„ ë¶€ì¡±.","ê¸´ì¥ê° ìˆìœ¼ë‚˜ ì§„ì •ì„± ìˆìŒ.","ë§ì˜ ì¼ê´€ì„± ìœ ì§€.","ë…¼ë¦¬ íë¦„ì´ ì•½ê°„ ë¶ˆë¶„ëª….","ì „ë‹¬ë ¥ì€ ìˆìœ¼ë‚˜ ì–´íœ˜ ë¶€ì¡±."]
  },
  {
    id: 2, title: "â‘¡ ì „ê³µì í•©ì„±", criteria: "ì „ê³µ ê´€ë ¨ ê²½í—˜, ì§„ë¡œ ë™ê¸°",
    levels: {A:"ì „ê³µ ì´í•´ë„ ë†’ìŒ",B:"ì „ê³µ ê´€ì‹¬ ëšœë ·í•˜ë‚˜ êµ¬ì²´ì„± ë¶€ì¡±",C:"ê´€ì‹¬ ìˆìœ¼ë‚˜ ê²½í—˜ ì œí•œì ",D:"ë™ê¸° ë¶ˆëª…í™•",E:"ë¬´ê´€í•œ ë‹µë³€"},
    comments: ["ì „ê³µ ê´€ë ¨ ê²½í—˜ í’ë¶€.","í•™ë¬¸ì  ì´í•´ë„ê°€ ë†’ìŒ.","ì§„ë¡œ ë™ê¸°ê°€ ë¶„ëª…í•¨.","ê³¼ëª© ì—°ê³„ì„± ì„¤ëª… ìš°ìˆ˜.","íƒêµ¬í™œë™ êµ¬ì²´ì  ì–¸ê¸‰.","ê´€ì‹¬ì€ ìˆìœ¼ë‚˜ ì‚¬ë¡€ ë¶€ì¡±.","ë‚´ìš© êµ¬ì²´ì„± ì•½í•¨.","ì—°ê²°ì„± ë¯¸í¡.","ì „ê³µ ê´€ë ¨ ì§€ì‹ ë¶€ì¡±.","ë™ê¸° ì„¤ëª… ëª¨í˜¸."]
  },
  {
    id: 3, title: "â‘¢ íƒêµ¬ë ¥", criteria: "ë…¼ë¦¬ì  ì‚¬ê³ , ë¬¸ì œí•´ê²°, ì§€ì  í˜¸ê¸°ì‹¬",
    levels: {A:"ë¬¸ì œ ë¶„ì„ ë° ì°½ì˜ì  ëŒ€ì•ˆ ì œì‹œ",B:"ë…¼ë¦¬ì  ë¶„ì„ ìš°ìˆ˜",C:"ê¸°ë³¸ ì‚¬ê³  ê°€ëŠ¥",D:"ë…¼ë¦¬ ë¶ˆëª…í™•",E:"ì´í•´ë ¥ ë¶€ì¡±"},
    comments: ["ë…¼ë¦¬ì  ì‚¬ê³  ìš°ìˆ˜.","íƒêµ¬ê³¼ì • ì²´ê³„ì .","ë¬¸ì œ ë¶„ì„ë ¥ ë›°ì–´ë‚¨.","ì°½ì˜ì  ì•„ì´ë””ì–´ ì œì‹œ.","ë¹„íŒì  ì‚¬ê³ ë ¥ íƒì›”.","ë…¼ë¦¬ ì „ê°œ ì•½í•¨.","íƒêµ¬ ì˜ë„ëŠ” ì¢‹ìœ¼ë‚˜ í‘œí˜„ ë¶€ì¡±.","ì‚¬ê³  ê¹Šì´ ë¶€ì¡±.","í˜¸ê¸°ì‹¬ì€ ìˆìœ¼ë‚˜ ì—°ê²° ì•½í•¨.","ê²°ë¡  ë¯¸í¡."]
  },
  {
    id: 4, title: "â‘£ ì¸ì„±", criteria: "í˜‘ì—…, ë°°ë ¤, ì±…ì„ê°",
    levels: {A:"í˜‘ë ¥ íƒœë„ ìš°ìˆ˜",B:"ì„±ì‹¤í•˜ê³  ì˜ˆì˜ ë°”ë¦„",C:"ì¼ë°˜ì  íƒœë„ ìœ ì§€",D:"ì†Œê·¹ì  íƒœë„",E:"ë¬´ì„±ì˜í•¨"},
    comments: ["í˜‘ë™ì‹¬ì´ ë‹ë³´ì„.","íƒ€ì¸ ì¡´ì¤‘ íƒœë„.","ì±…ì„ê° ê°•í•¨.","ì˜ˆì˜ ë°”ë¦„.","ì„±ì‹¤í•œ ìì„¸.","ë°°ë ¤ í‘œí˜„ ì¢‹ìŒ.","ì†Œê·¹ì  íƒœë„.","í˜‘ë ¥ì€ ìˆìœ¼ë‚˜ ì ê·¹ì„± ë¶€ì¡±.","ìê¸°ì¤‘ì‹¬ì  ë‹µë³€.","ë¬´ì„±ì˜í•œ ì‘ë‹µ."]
  },
  {
    id: 5, title: "â‘¤ ì„±ì¥ ê°€ëŠ¥ì„±", criteria: "ìê¸°ì„±ì°°, ë°œì „ì˜ì§€, ê³„íš",
    levels: {A:"ìê¸°ì´í•´ ë†’ê³  êµ¬ì²´ì  ê³„íš ì œì‹œ",B:"ì„±ì°° ë° ëª©í‘œì˜ì‹ ìˆìŒ",C:"ë°œì „ ì˜ì§€ëŠ” ìˆìœ¼ë‚˜ êµ¬ì²´ì„± ë¶€ì¡±",D:"ìê¸°ì¸ì‹ ì•½í•¨",E:"ì„±ì°° ë¶€ì¡±"},
    comments: ["ëª©í‘œì˜ì‹ ë¶„ëª….","ìê¸°ì´í•´ë„ ë†’ìŒ.","ì„±ì°°ì  íƒœë„.","ë°œì „ ê³„íš êµ¬ì²´ì .","ê¾¸ì¤€í•œ í•™ìŠµ ì˜ì§€.","ì˜ì§€ëŠ” ìˆìœ¼ë‚˜ ì‹¤í–‰ ë¶€ì¡±.","ëª©í‘œ ë¶ˆëª…í™•.","ì„±ì°°ì€ ìˆìœ¼ë‚˜ êµ¬ì²´ì„± ë¶€ì¡±.","ìê¸°ì´í•´ ë¶€ì¡±.","ë°œì „ ê°€ëŠ¥ì„± ì•½í•¨."]
  }
];

// ìƒì„±
window.onload = () => {
  const container = document.getElementById("rubrics");
  rubricData.forEach(r => {
    const levels = Object.entries(r.levels).map(([g,t])=>`<td onclick="selectGrade(this)" title="${t}">${g}</td>`).join("");
    const opts = r.comments.map(c=>`<option>${c}</option>`).join("");
    container.innerHTML += `
      <div class="card">
        <h2>${r.title}</h2>
        <div class="card-content">
          <table>
            <tr><th>ì„¸ë¶€ ê¸°ì¤€</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th></tr>
            <tr><td>${r.criteria}</td>${levels}</tr>
          </table>
          <select onchange="addComment(this,${r.id})"><option>ì½”ë©˜íŠ¸ ì„ íƒ</option>${opts}</select>
          <textarea id="feedback${r.id}" placeholder="í”¼ë“œë°± ì…ë ¥ ë˜ëŠ” ìˆ˜ì • ê°€ëŠ¥"></textarea>
        </div>
      </div>`;
  });
  loadData();
};

// ì½”ë©˜íŠ¸ ì¶”ê°€
function addComment(sel,id){
  if(sel.value){
    const box=document.getElementById("feedback"+id);
    box.value+=(box.value?"\n":"")+sel.value;
    sel.value="";saveData();
  }
}

// ë“±ê¸‰ì„ íƒ
function selectGrade(td){
  td.parentNode.querySelectorAll("td").forEach(x=>x.classList.remove("selected"));
  td.classList.add("selected");saveData();
}

// ì €ì¥
function saveData(){
  const d={studentName:studentName.value,university:university.value,major:major.value,session:session.value,summary:summary.value};
  rubricData.forEach(r=>d["feedback"+r.id]=document.getElementById("feedback"+r.id).value);
  localStorage.setItem("feedbackForm",JSON.stringify(d));
}
function loadData(){
  const d=JSON.parse(localStorage.getItem("feedbackForm")||"{}");
  studentName.value=d.studentName||"";university.value=d.university||"";major.value=d.major||"";session.value=d.session||"";summary.value=d.summary||"";
  rubricData.forEach(r=>{document.getElementById("feedback"+r.id).value=d["feedback"+r.id]||""});
}

// PDF ì €ì¥
document.getElementById("saveBtn").addEventListener("click",async()=>{
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF();
  const font=await fetch("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NanumGothic-Regular.woff").then(r=>r.arrayBuffer());
  const base64=btoa(String.fromCharCode(...new Uint8Array(font)));
  doc.addFileToVFS("NanumGothic.ttf",base64);
  doc.addFont("NanumGothic.ttf","NanumGothic","normal");
  doc.setFont("NanumGothic");
  doc.setFontSize(12);
  let y=20;
  doc.text(`ëª¨ë‘ì˜ 1:1 ëŒ€ì… ë©´ì ‘ í‰ê°€ (All Teachers Edition)`,20,y);y+=10;
  doc.text(`í•™ìƒ:${studentName.value||""} / ëŒ€í•™:${university.value||""} / í•™ê³¼:${major.value||""} / ì°¨ì‹œ:${session.value||""}`,20,y);y+=10;
  rubricData.forEach(r=>{
    const text=document.getElementById("feedback"+r.id).value;
    if(text){doc.text(r.title,20,y);y+=6;const lines=doc.splitTextToSize(text,170);doc.text(lines,20,y);y+=lines.length*6+4;}
  });
  const s=summary.value;if(s){doc.text("ì¢…í•© í”¼ë“œë°±",20,y);y+=6;const lines=doc.splitTextToSize(s,170);doc.text(lines,20,y);}
  doc.save(`${studentName.value||"í•™ìƒ"}-${university.value||"ëŒ€í•™"}-${major.value||"í•™ê³¼"}-ë©´ì ‘í”¼ë“œë°±-${session.value||""}.pdf`);
});
</script>
</body>
</html>
